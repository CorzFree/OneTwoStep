{"version":3,"sources":["../../../../../assets/game/script/assets/game/script/stone.js"],"names":["GLB","require","cc","Class","extends","Component","properties","clickAudio","default","url","AudioClip","stoneSp","type","Sprite","normalSf","SpriteFrame","clickSf","start","node","on","Node","EventType","TOUCH_START","onClick","init","data","spriteFrame","Game","GameManager","gameState","GameState","Play","ID","PlayerManager","player","jumpRecordId","exist","jumpPos","some","x","bind","audioEngine","play","msg","action","PLAYER_STEP_DATA","sendEventEx","onDestroy","off"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAY;AACRC,qBAAS,IADD;AAERC,iBAAKP,GAAGQ;AAFA,SADJ;AAKRC,iBAAS;AACLH,qBAAS,IADJ;AAELI,kBAAMV,GAAGW;AAFJ,SALD;AASRC,kBAAU;AACNN,qBAAS,IADH;AAENI,kBAAMV,GAAGa;AAFH,SATF;AAaRC,iBAAS;AACLR,qBAAS,IADJ;AAELI,kBAAMV,GAAGa;AAFJ;AAbD,KAHP;;AAsBLE,SAtBK,mBAsBG;AACJ;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAajB,GAAGkB,IAAH,CAAQC,SAAR,CAAkBC,WAA/B,EAA4C,KAAKC,OAAjD,EAA0D,IAA1D;AACH,KAzBI;;;AA2BLC,UAAM,cAASC,IAAT,EAAe;AACjB,aAAKA,IAAL,GAAYA,IAAZ;AACA,aAAKd,OAAL,CAAae,WAAb,GAA2B,KAAKZ,QAAhC;AACH,KA9BI;;AAgCLS,aAAS,mBAAW;AAChB,YAAII,KAAKC,WAAL,CAAiBC,SAAjB,KAA+BC,UAAUC,IAA7C,EAAmD;AAC/C;AACH;AACD,YAAI,KAAKN,IAAL,CAAUO,EAAV,KAAiBL,KAAKM,aAAL,CAAmBC,MAAnB,CAA0BC,YAA/C,EAA6D;AACzD,gBAAIC,QAAQT,KAAKM,aAAL,CAAmBC,MAAnB,CAA0BG,OAA1B,CAAkCC,IAAlC,CAAuC,UAASC,CAAT,EAAY;AAC3D,uBAAO,KAAKd,IAAL,KAAcc,CAArB;AACH,aAFkD,CAEjDC,IAFiD,CAE5C,IAF4C,CAAvC,CAAZ;AAGA,gBAAI,CAACJ,KAAL,EAAY;AACRlC,mBAAGuC,WAAH,CAAeC,IAAf,CAAoB,KAAKnC,UAAzB,EAAqC,KAArC,EAA4C,CAA5C;AACA,qBAAKI,OAAL,CAAae,WAAb,GAA2B,KAAKV,OAAhC;AACA,oBAAI2B,MAAM;AACNC,4BAAQ5C,IAAI6C,gBADN;AAENpB,0BAAM,KAAKA;AAFL,iBAAV;AAIAE,qBAAKC,WAAL,CAAiBkB,WAAjB,CAA6BH,GAA7B;AACH;AACJ;AACJ,KAlDI;;AAoDLI,aApDK,uBAoDO;AACR,aAAK7B,IAAL,CAAU8B,GAAV,CAAc,OAAd,EAAuB,KAAKzB,OAA5B,EAAqC,IAArC;AACH;AAtDI,CAAT","file":"stone.js","sourceRoot":"../../../../../assets/game/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar GLB = require(\"Glb\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        clickAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n        stoneSp: {\n            default: null,\n            type: cc.Sprite\n        },\n        normalSf: {\n            default: null,\n            type: cc.SpriteFrame\n        },\n        clickSf: {\n            default: null,\n            type: cc.SpriteFrame\n        }\n    },\n\n    start() {\n        // 按住效果--\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onClick, this);\n    },\n\n    init: function(data) {\n        this.data = data;\n        this.stoneSp.spriteFrame = this.normalSf;\n    },\n\n    onClick: function() {\n        if (Game.GameManager.gameState !== GameState.Play) {\n            return;\n        }\n        if (this.data.ID === Game.PlayerManager.player.jumpRecordId) {\n            var exist = Game.PlayerManager.player.jumpPos.some(function(x) {\n                return this.data === x;\n            }.bind(this));\n            if (!exist) {\n                cc.audioEngine.play(this.clickAudio, false, 1);\n                this.stoneSp.spriteFrame = this.clickSf;\n                var msg = {\n                    action: GLB.PLAYER_STEP_DATA,\n                    data: this.data\n                };\n                Game.GameManager.sendEventEx(msg);\n            }\n        }\n    },\n\n    onDestroy() {\n        this.node.off(\"click\", this.onClick, this);\n    }\n});\n"]}